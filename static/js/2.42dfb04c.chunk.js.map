{"version":3,"sources":["components/PageModule.js","components/Chevron.js","components/Carousel.js","containers/Charts/theme.js","containers/Charts/ChartBase.js","containers/Charts/StackedBar.js","containers/Charts/Bar.js","containers/Charts/Line.js","containers/Charts/BarAndLine.js","containers/Charts/index.js","data/index.js","data/10-1＜2018-2020年會員年購票次數＞.csv","data/10-2＜2018-2020年會員購票次數及年齡分佈＞.csv","data/11＜2018-2020年會員購票方式＞.csv","data/3-1＜2018-2020年節目票房＞.csv","data/3-2＜2018-2020年節目檔數＞.csv","data/3-3＜2018-2020年演出場次＞.csv","data/3-4＜2018-2020年售出票數＞.csv","data/5-1＜2018-2020上下半年節目票房＞.csv","data/5-2＜2018-2020上下半年節目檔數＞.csv","data/5-3＜2018-2020上下半年演出場次＞.csv","data/5-4＜2018-2020上下半年售出票數＞.csv","data/6-1＜2020每月節目票房＞.csv","data/6-2＜2020每月節目檔數＞.csv","data/6-3＜2020每月演出場次＞.csv","data/6-4＜2020每月售票張數＞.csv","data/8＜2018-2020年會員購票人數＞.csv","data/9＜2018-2020年會員購票金額＞.csv"],"names":["PageModule","right","left","leftProps","rightMarginTop","props","flexDir","responsive","justify","align","textAlign","mt","flex","width","Chevron","children","isMobile","size","Left","Right","StyleBox","styled","Box","charts","activeItemIndex","arrowWidth","length","Carousel","forwardRef","ref","autoplay","arrows","slidesToShow","silderProps","typeIndex","setType","useState","setActiveIndex","slickRef","useRef","theRef","useEffect","current","slickGoTo","useResponsive","position","prevArrow","nextArrow","dots","autoplaySpeed","speed","beforeChange","from","to","defaultProps","infinite","assign","require","colors","white","whiteFaded","blueGrey700","grey900","baseProps","height","padding","top","bottom","baseLabelStyles","fontFamily","fontSize","letterSpacing","fill","stroke","strokeWidth","chartLabelStyles","centeredLabelStyles","textAnchor","strokeLinecap","strokeLinejoin","theme","area","style","data","labels","axis","axisLabel","grid","pointerEvents","ticks","tickLabels","polarDependentAxis","bar","boxplot","max","maxLabels","median","medianLabels","min","minLabels","q1","q1Labels","q3","q3Labels","boxWidth","candlestick","candleColors","positive","negative","chart","errorbar","borderWidth","opacity","group","colorScale","histogram","legend","gutter","orientation","titleOrientation","type","title","line","pie","scatter","stack","tooltip","flyoutStyle","flyoutPadding","cornerRadius","pointerLength","voronoi","flyout","ChartBase","xUnit","unit","xPadding","yMax","tooltipLabels","domain","noXUnit","tickValues","tickFormat","keysColor","animate","yAxisWidth","useMemo","domainPadding","x","y","duration","containerComponent","labelComponent","constrainToVisibleArea","text","voronoiBlacklist","label","axisLabelComponent","dx","dependentAxis","writingMode","textOrientation","transform","StackedBar","memo","total","keys","filtered","valueFormat","precision","reduce","kc","k","i","totalLabels","values","map","t","pre","toString","split","formatter","format","sumLabels","groupBy","all","dd","Object","mapValues","g","sumBy","datum","childName","key","name","barRatio","reverse","Percent","Bar","radioToggle","barWidth","offset","undefined","Line","grouped","groupStroke","gps","d","onlyStroke","l","formatYmax","ymax","BarAndLine","data2","unit2","useCallback","roundedYMax","toLocaleString","range","getTickFormat","offsetX","v","verticalAnchor","dy","fetcher","fetch","then","res","chartComponents","stacked","getBarWidth","count","ButtonBase","input","checkbox","color","as","m","cursor","borderColor","borderRadius","_checked","px","py","ToggleBase","categoryPerLine","justifyContent","Text","display","chunk","Infinity","row","flexWrap","mx","CheckBoxButton","useCheckbox","getInputProps","getCheckboxProps","CategoryToggler","options","onChange","defaultValue","useCheckboxGroup","value","RadioButton","useRadio","CategoryRadioToggler","useRadioGroup","getRootProps","getRadioProps","rootProps","getYMax","Math","maxBy","Chart","togglable","file","notes","biaxial","defaultFilter","useSWR","formattedData","rows","r","header","shift","last","Number","isNaN","vv","slice","some","Boolean","index","f","filter","sidedData","activeCategories","setCategories","ratio","border","p","createElement","active","includes","spacing","rounded","bg","fontWeight","n","Note","ChartLayout","H3","Charts","chartData","lazyLoad","module","exports","default"],"mappings":"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","file":"static/js/2.42dfb04c.chunk.js","sourcesContent":["import React from 'react'\nimport Flex from './Flex'\nimport Box from './Box'\nimport { responsive } from './ThemeProvider/theme'\n\nconst PageModule = ({ right, left, leftProps, rightMarginTop, ...props }) => {\n  return (\n    <Flex flexDir={responsive('column', 'row')} justify=\"center\" align=\"center\" {...props}>\n      <Box textAlign={responsive('center', 'left')} {...leftProps}>\n        {left}\n      </Box>\n      <Box mt={responsive(rightMarginTop || '2em', 0)} flex={1} width={responsive('100%', '50%')}>\n        {right}\n      </Box>\n    </Flex>\n  )\n}\n\nexport default PageModule\n","import React from 'react';\nimport { MdKeyboardArrowRight, MdKeyboardArrowLeft } from 'react-icons/md';\nimport { Circle } from '@chakra-ui/layout';\nimport { responsive } from './ThemeProvider/theme';\n\n// const Corner = ({ transform, ...props }) => (\n//   <Box width=\"100%\" {...props}>\n//     <Box\n//       width=\"100%\"\n//       pt=\"100%\"\n//       borderLeft=\"1px solid currentColor\"\n//       borderBottom=\"1px solid currentColor\"\n//       transform={transform}\n//     />\n//   </Box>\n// )\n\nconst Chevron = ({ children, isMobile, ...props }) => (\n  <Circle {...props}>\n    <MdKeyboardArrowLeft size={props.width} />\n  </Circle>\n)\n\nconst ChevronRight = ({ children, isMobile, ...props }) => (\n  <Circle {...props}>\n    <MdKeyboardArrowRight size={props.width} />\n  </Circle>\n)\n\n// const ChevronTop = ({ children, ...props }) => (\n//   <Circle bg=\"black\" width={responsive('2.5em', '3.5em')} color=\"white\" position=\"absolute\" top=\"0\" left=\"0\" transform=\"translate(0%, -120%)\" {...props}>\n//     <Box transform=\"rotate(-90deg)\">\n//       <IoIosPlay size=\"1.5em\" />\n//     </Box>\n//   </Circle>\n// )\n\n// const ChevronBottom = ({ children, ...props }) => (\n//   <Circle bg=\"black\" width={responsive('2.5em', '3.5em')} color=\"white\" position=\"absolute\" bottom=\"0\" left=\"0\" transform=\"translate(0%, 120%)\" {...props}>\n//     <Box transform=\"rotate(90deg)\">\n//       <IoIosPlay size=\"1.5em\" />\n//     </Box>\n//   </Circle>\n// )\n\nChevron.Left = Chevron\nChevron.Right = ChevronRight\n// Chevron.Top = ChevronTop\n// Chevron.Bottom = ChevronBottom\n\nexport default Chevron;\n","import React, { useEffect, useRef, useState, forwardRef } from 'react';\nimport styled from '@emotion/styled';\n\nimport Slider from 'react-slick';\nimport 'slick-carousel/slick/slick.css';\nimport 'slick-carousel/slick/slick-theme.css';\n\nimport Box from './Box'\nimport Chevron from './Chevron'\nimport useResponsive from '../contexts/mediaQuery/useResponsive';\n\nconst StyleBox = styled(Box)`\n  img,\n  picture {\n    display: block;\n  }\n  .slick-track {\n    display: flex;\n    align-items: stretch;\n  }\n  .slick-arrow {\n    height: auto;\n    font-size: 0.75em;\n    z-index: 1;\n    color: black;\n    &::before {\n      content: none;\n    }\n  }\n  .slick-prev {\n    left: ${props => props.isMobile ? (props.charts ? 0 : '-2.75em') : '-4.5em'};\n    top: ${props => props.isMobile && props.charts && '1em'};\n    background: linear-gradient(90deg, rgba(192,192,192,0.3) 0%, #A2A2A2 60%);\n    cursor: ${props => !props.activeItemIndex && 'not-allowed'};\n    opacity: ${props => !props.activeItemIndex && 0.5};\n    width: ${props => props.arrowWidth};\n    :hover {\n      background: linear-gradient(90deg, rgba(192,192,192,0.3) 0%, #A2A2A2 60%);\n      color: black;\n    }\n  }\n  .slick-next {\n    right: ${props => props.isMobile ? (props.charts ? 0 : '-2.75em') : '-4.5em'};\n    top: ${props => props.isMobile && props.charts && '1em'};\n    background: linear-gradient(90deg, #A2A2A2 60%, rgba(192,192,192,0.3) 100%);\n    opacity: ${props => (props.activeItemIndex == props.length - 1) && 0.5};\n    cursor: ${props => (props.activeItemIndex == props.length - 1) && 'not-allowed'};\n    width: ${props => props.arrowWidth};\n    :hover {\n      background: linear-gradient(90deg, #A2A2A2 60%, rgba(192,192,192,0.3) 100%);\n      color: black;\n    }\n  }\n`\n\nconst Carousel = forwardRef(({\n  children,\n  width,\n  flex,\n  autoplay,\n  arrows,\n  slidesToShow,\n  silderProps,\n  typeIndex,\n  setType,\n  charts,\n  ...props\n}, ref) => {\n  const [activeItemIndex, setActiveIndex] = useState(0)\n  const slickRef = useRef()\n  const theRef = ref || slickRef\n  useEffect(() => {\n    if (theRef.current) {\n      theRef.current.slickGoTo(typeIndex)\n    }\n  }, [theRef, typeIndex])\n  const { isMobile } = useResponsive()\n  const arrowWidth = isMobile ? (charts ? '1.5rem' : '2.25rem') : '2.5rem'\n  const length = children.length\n  return (\n    <StyleBox\n      position=\"relative\"\n      charts={charts}\n      isMobile={isMobile}\n      width={width}\n      flex={flex}\n      arrowWidth={arrowWidth}\n      activeItemIndex={activeItemIndex}\n      length={length}\n      {...props}\n    >\n      <Slider\n        autoplay={autoplay}\n        prevArrow={<Chevron.Left isMobile={isMobile} width={arrowWidth} />}\n        nextArrow={<Chevron.Right isMobile={isMobile} width={arrowWidth}  />}\n        arrows={arrows}\n        dots={false}\n        ref={theRef}\n        autoplaySpeed={3500}\n        speed={750}\n        // afterChange={(current) => setActiveIndex(current)}\n        beforeChange={(from, to) => {\n          setActiveIndex(to)\n          if (typeof setType === 'function') {\n            setType(to)\n          }\n        }}\n        slidesToShow={slidesToShow || 1}\n        {...silderProps}\n      >\n        {children}\n      </Slider>\n    </StyleBox>\n  );\n})\n\nCarousel.defaultProps = {\n  arrows: true,\n  silderProps: {\n    infinite: false,\n  }\n}\n\nexport default Carousel;\n","// Colors\r\n\r\nconst { assign } = require(\"lodash\")\r\n\r\nconst drama = '#E05B5A'\r\nconst music = '#ECA687'\r\nconst dance = '#FAF599'\r\nconst family = '#9DC29F'\r\nconst other = '#39868C'\r\nconst colors = [\r\n  drama,\r\n  music,\r\n  dance,\r\n  family,\r\n  other,\r\n  '#a7a7a7',\r\n];\r\nconst white = \"#FFF\";\r\nconst whiteFaded = \"rgba(255,255,255,0.3)\";\r\nconst blueGrey50 = \"#ECEFF1\";\r\nconst blueGrey700 = \"#455A64\";\r\nconst grey900 = \"#212121\";\r\n\r\n// Typography\r\nconst sansSerif = \"'Noto Sans TC', sans-serif\";\r\nconst letterSpacing = \"normal\";\r\nconst fontSize = 12;\r\n\r\n// Layout\r\nconst padding = 8;\r\nconst baseProps = {\r\n  width: 400,\r\n  height: 250,\r\n  padding: {\r\n    top: 20,\r\n    bottom: 32,\r\n    left: 48,\r\n    right: 20,\r\n  }\r\n};\r\n\r\n// * Labels\r\nconst baseLabelStyles = {\r\n  fontFamily: sansSerif,\r\n  fontSize,\r\n  letterSpacing,\r\n  padding,\r\n  fill: white,\r\n  stroke: \"transparent\",\r\n  strokeWidth: 0,\r\n};\r\n\r\nconst chartLabelStyles = assign({ fontSize: 14 }, baseLabelStyles);\r\n\r\nconst centeredLabelStyles = assign({ textAnchor: \"middle\" }, baseLabelStyles);\r\n\r\n// Strokes\r\n// const strokeDasharray = \"10, 5\";\r\nconst strokeLinecap = \"round\";\r\nconst strokeLinejoin = \"round\";\r\n\r\n// Put it all together...\r\nconst theme = {\r\n  area: assign(\r\n    {\r\n      style: {\r\n        data: {\r\n          fill: grey900\r\n        },\r\n        labels: chartLabelStyles\r\n      }\r\n    },\r\n    baseProps\r\n  ),\r\n  axis: assign(\r\n    {\r\n      style: {\r\n        axis: {\r\n          fill: \"transparent\",\r\n          stroke: whiteFaded,\r\n          strokeWidth: 2,\r\n          strokeLinecap,\r\n          strokeLinejoin\r\n        },\r\n        axisLabel: assign({}, centeredLabelStyles, {\r\n          textAnchor: 'end',\r\n          padding: 32,\r\n          stroke: \"transparent\"\r\n        }),\r\n        grid: {\r\n          fill: \"none\",\r\n          stroke: whiteFaded,\r\n          strokeLinecap,\r\n          strokeLinejoin,\r\n          pointerEvents: \"painted\"\r\n        },\r\n        ticks: {\r\n          fill: \"transparent\",\r\n          stroke: 'none',\r\n        },\r\n        tickLabels: assign({}, baseLabelStyles, {\r\n          fill: white\r\n        })\r\n      }\r\n    },\r\n    baseProps\r\n  ),\r\n  polarDependentAxis: assign({\r\n    style: {\r\n      ticks: {\r\n        fill: \"transparent\",\r\n        size: 1,\r\n        stroke: \"transparent\"\r\n      }\r\n    }\r\n  }),\r\n  bar: assign(\r\n    {\r\n      style: {\r\n        data: {\r\n          fill: blueGrey700,\r\n          padding,\r\n          strokeWidth: 0\r\n        },\r\n        labels: chartLabelStyles\r\n      }\r\n    },\r\n    baseProps\r\n  ),\r\n  boxplot: assign(\r\n    {\r\n      style: {\r\n        max: { padding, stroke: blueGrey700, strokeWidth: 1 },\r\n        maxLabels: assign({}, baseLabelStyles, { padding: 3 }),\r\n        median: { padding, stroke: blueGrey700, strokeWidth: 1 },\r\n        medianLabels: assign({}, baseLabelStyles, { padding: 3 }),\r\n        min: { padding, stroke: blueGrey700, strokeWidth: 1 },\r\n        minLabels: assign({}, baseLabelStyles, { padding: 3 }),\r\n        q1: { padding, fill: blueGrey700 },\r\n        q1Labels: assign({}, baseLabelStyles, { padding: 3 }),\r\n        q3: { padding, fill: blueGrey700 },\r\n        q3Labels: assign({}, baseLabelStyles, { padding: 3 })\r\n      },\r\n      boxWidth: 20\r\n    },\r\n    baseProps\r\n  ),\r\n  candlestick: assign(\r\n    {\r\n      style: {\r\n        data: {\r\n          stroke: blueGrey700\r\n        },\r\n        labels: assign({}, baseLabelStyles, { padding: 5 })\r\n      },\r\n      candleColors: {\r\n        positive: \"#ffffff\",\r\n        negative: blueGrey700\r\n      }\r\n    },\r\n    baseProps\r\n  ),\r\n  chart: baseProps,\r\n  errorbar: assign(\r\n    {\r\n      borderWidth: 8,\r\n      style: {\r\n        data: {\r\n          fill: \"transparent\",\r\n          opacity: 1,\r\n          stroke: blueGrey700,\r\n          strokeWidth: 2\r\n        },\r\n        labels: baseLabelStyles\r\n      }\r\n    },\r\n    baseProps\r\n  ),\r\n  group: assign(\r\n    {\r\n      colorScale: colors\r\n    },\r\n    baseProps\r\n  ),\r\n  histogram: assign(\r\n    {\r\n      style: {\r\n        data: {\r\n          fill: blueGrey700,\r\n          stroke: grey900,\r\n          strokeWidth: 2\r\n        },\r\n        labels: baseLabelStyles\r\n      }\r\n    },\r\n    baseProps\r\n  ),\r\n  legend: {\r\n    colorScale: colors,\r\n    gutter: 10,\r\n    orientation: \"vertical\",\r\n    titleOrientation: \"top\",\r\n    style: {\r\n      data: {\r\n        type: \"circle\"\r\n      },\r\n      labels: baseLabelStyles,\r\n      title: assign({}, baseLabelStyles, { padding: 5 })\r\n    }\r\n  },\r\n  line: assign(\r\n    {\r\n      style: {\r\n        data: {\r\n          fill: \"transparent\",\r\n          opacity: 1,\r\n          stroke: blueGrey700,\r\n          strokeWidth: 2,\r\n          strokeLinecap,\r\n          strokeLinejoin,\r\n        },\r\n        labels: chartLabelStyles\r\n      }\r\n    },\r\n    baseProps\r\n  ),\r\n  pie: assign(\r\n    {\r\n      colorScale: colors,\r\n      style: {\r\n        data: {\r\n          padding,\r\n          stroke: blueGrey50,\r\n          strokeWidth: 1\r\n        },\r\n        labels: assign({}, baseLabelStyles, { padding: 20 })\r\n      }\r\n    },\r\n    baseProps\r\n  ),\r\n  scatter: assign(\r\n    {\r\n      style: {\r\n        data: {\r\n          fill: blueGrey700,\r\n          opacity: 1,\r\n          stroke: \"transparent\",\r\n          strokeWidth: 0\r\n        },\r\n        labels: baseLabelStyles\r\n      }\r\n    },\r\n    baseProps\r\n  ),\r\n  stack: assign(\r\n    {\r\n      colorScale: colors\r\n    },\r\n    baseProps\r\n  ),\r\n  tooltip: {\r\n    style: assign({}, baseLabelStyles, { padding: 0, pointerEvents: \"none\" }),\r\n    flyoutStyle: {\r\n      stroke: grey900,\r\n      strokeWidth: 1,\r\n      fill: \"#000\",\r\n      pointerEvents: \"none\",\r\n    },\r\n    flyoutPadding: {\r\n      left: 24,\r\n      right: 24,\r\n      top: 8,\r\n      bottom: 8,\r\n    },\r\n    cornerRadius: 20,\r\n    pointerLength: 0\r\n  },\r\n  voronoi: assign(\r\n    {\r\n      style: {\r\n        data: {\r\n          fill: \"transparent\",\r\n          stroke: \"transparent\",\r\n          strokeWidth: 0\r\n        },\r\n        labels: assign({}, baseLabelStyles, { padding: 8, pointerEvents: \"none\" }),\r\n        flyout: {\r\n          stroke: 'white',\r\n          strokeWidth: 1,\r\n          fill: \"#000\",\r\n          pointerEvents: \"none\",\r\n        }\r\n      }\r\n    },\r\n    baseProps\r\n  )\r\n};\r\n\r\nexport default theme\r\n","import React, { useMemo } from 'react'\r\nimport { VictoryAxis, VictoryChart, VictoryLabel, VictoryTooltip, VictoryVoronoiContainer } from 'victory';\r\n\r\nimport theme from './theme';\r\n\r\nconst ChartBase = ({\r\n  children,\r\n  xUnit,\r\n  unit,\r\n  xPadding,\r\n  yMax,\r\n  tooltipLabels,\r\n  domain,\r\n  noXUnit,\r\n  padding = {},\r\n  tickValues,\r\n  tickFormat,\r\n  keysColor,\r\n  animate,\r\n}) => {\r\n  const yAxisWidth = useMemo(() => {\r\n    if (yMax < 100) return 3.5\r\n    if (yMax < 1000) return 4\r\n    return 5\r\n  }, [yMax])\r\n  return (\r\n    <VictoryChart\r\n      domainPadding={{ x: xPadding, y: 20 }}\r\n      theme={theme}\r\n      domain={domain}\r\n      animate={animate && { duration: 500 }}\r\n      padding={{ ...theme.chart.padding, ...padding, left: yAxisWidth * 13 }}\r\n      containerComponent={tooltipLabels &&\r\n        <VictoryVoronoiContainer\r\n          // mouseFollowTooltips\r\n          labels={tooltipLabels}\r\n          labelComponent={<VictoryTooltip constrainToVisibleArea style={{ fill: ({ text }) => keysColor?.[text?.[0]] || 'white' }} />}\r\n          voronoiBlacklist={['ghost']}\r\n        />\r\n      }\r\n    >\r\n      <VictoryAxis\r\n        style={{ grid: { stroke: 'none' }, axisLabel: { padding: 8 } }}\r\n        label={!noXUnit && `(${xUnit})`}\r\n        axisLabelComponent={<VictoryLabel dx={160}/>}\r\n      />\r\n      <VictoryAxis\r\n        dependentAxis\r\n        tickValues={tickValues}\r\n        tickFormat={tickFormat}\r\n        label={unit}\r\n        style={{\r\n          axis: { stroke: 'none' },\r\n          axisLabel: {\r\n            writingMode: 'vertical-rl',\r\n            textOrientation: 'mixed',\r\n            transform: 'rotate(180deg)',\r\n            textAnchor: 'start',\r\n          }\r\n        }}\r\n        axisLabelComponent={<VictoryLabel x={8} y={28} />}\r\n      />\r\n      {children}\r\n    </VictoryChart>\r\n  )\r\n}\r\n\r\nexport default ChartBase\r\n","import { format } from 'd3-format';\r\nimport { groupBy, mapValues, round, size, sumBy } from 'lodash';\r\nimport React, { memo, useMemo } from 'react'\r\nimport { VictoryBar, VictoryStack } from 'victory';\r\n\r\nimport ChartBase from './ChartBase';\r\nimport theme from './theme';\r\n\r\nconst StackedBar = memo(({ data, total, keys, filtered, yMax, valueFormat, precision, ...props }) => {\r\n  const keysColor = useMemo(() => keys.reduce((kc, k, i) => {\r\n    kc[k] = theme.group.colorScale[i]\r\n    return kc\r\n  }, {}), [keys])\r\n  const totalLabels = useMemo(() => total?.values.map(t => valueFormat ? valueFormat(t.y) : t.y), [total, valueFormat])\r\n\r\n  const pre = useMemo(() => typeof precision === 'number' ? precision : size(totalLabels ? totalLabels[0].toString().split('.')[1] : 0) , [totalLabels, precision])\r\n  const formatter = useMemo(() => pre > 0 ? format(`.${pre}f`) : format(',d'), [pre])\r\n  const sumLabels = useMemo(() => {\r\n    const group = groupBy(data.reduce((all, dd) => [...all, ...dd.values], []), 'x')\r\n    return Object.values(mapValues(group, g => valueFormat ? valueFormat(sumBy(g, 'y')) : formatter(sumBy(g, 'y'))))\r\n  }, [data, formatter, valueFormat])\r\n  const labels = filtered ? sumLabels : totalLabels?.map(formatter)\r\n  return (\r\n    <ChartBase\r\n      domain={{ y: [0, yMax] }}\r\n      tooltipLabels={({ datum }) => datum.y ? `${datum.childName}\\n${valueFormat ? valueFormat(datum.y) : datum.y}` : ''}\r\n      tickFormat={valueFormat}\r\n      yMax={yMax}\r\n      keysColor={keysColor}\r\n      {...props}\r\n    >\r\n      <VictoryStack labels={labels}>\r\n        {data.map(({ key, values }, i) => {\r\n          return (\r\n            <VictoryBar\r\n              key={key + i}\r\n              name={key}\r\n              data={values}\r\n              style={{ data: { fill: keysColor[key] } }}\r\n              barRatio={0.8}\r\n            />\r\n          );\r\n        }).reverse()}\r\n      </VictoryStack>\r\n    </ChartBase>\r\n  )\r\n})\r\n\r\nStackedBar.Percent = props => <StackedBar {...props} valueFormat={format('.0%')} />\r\n\r\nexport default StackedBar\r\n","import { format } from 'd3-format';\r\nimport React, { memo, useCallback, useMemo } from 'react'\r\nimport { VictoryBar, VictoryGroup } from 'victory';\r\nimport ChartBase from './ChartBase';\r\n\r\nimport theme from './theme';\r\n\r\nconst Bar = ({ data, keys, radioToggle, barWidth, precision, ...props }) => {\r\n  const pre = useMemo(() => typeof precision === 'number' ? precision : data[0].values[0].y.toString().split('.')[1] ? 1 : 0 , [data, precision])\r\n  const formatter = useMemo(() => pre > 0 ? format(`.${pre}f`) : format(',d'), [pre])\r\n\r\n  const keysColor = useMemo(() => keys.reduce((kc, k, i) => {\r\n    kc[k] = theme.group.colorScale[i]\r\n    return kc\r\n  }, {}), [keys])\r\n  return (\r\n    <ChartBase\r\n      // tooltipLabels={radioToggle ? (({ datum }) => `${datum.childName}\\n${datum.y}`) : undefined}\r\n      // keysColor={keysColor}\r\n      {...props}\r\n    >\r\n      <VictoryGroup offset={barWidth}>\r\n        {data.map(({ key, values }, i) => {\r\n          return (\r\n            <VictoryBar\r\n              key={key + i}\r\n              name={key}\r\n              data={values}\r\n              barWidth={barWidth}\r\n              style={{\r\n                data: { fill: radioToggle ? undefined : keysColor[key] },\r\n                labels: { fontSize: radioToggle ? 8 : 10 }\r\n              }}\r\n              labels={({ datum }) => formatter(datum.y)}\r\n            />\r\n          );\r\n        })}\r\n      </VictoryGroup>\r\n\r\n    </ChartBase>\r\n  )\r\n}\r\n\r\nexport default memo(Bar)\r\n","import React, { memo, useMemo } from 'react'\r\nimport { VictoryLine } from 'victory';\r\nimport ChartBase from './ChartBase';\r\n\r\nimport theme from './theme';\r\n\r\nconst Line = ({ data, keys, grouped, ...props }) => {\r\n  const keysColor = useMemo(() => keys.reduce((kc, k, i) => {\r\n    kc[k] = theme.group.colorScale[i]\r\n    return kc\r\n  }, {}), [keys])\r\n  const groupStroke = useMemo(() => {\r\n    if (!grouped) return {}\r\n    const groups = data.reduce((gps, d, i) => {\r\n      if (typeof gps[d.group] === 'undefined') {\r\n        gps[d.group] = i\r\n      }\r\n      return gps\r\n    }, {})\r\n    return groups\r\n  }, [grouped, data])\r\n  return (\r\n    <ChartBase\r\n      {...props}\r\n      tooltipLabels={({ datum }) => `${datum.childName}\\n${datum.x}月 - ${datum.y}`}\r\n      keysColor={keysColor}\r\n    >\r\n      {data.map(({ key, values, group }, i) => {\r\n        const onlyStroke = !groupStroke[group]\r\n        const l = (\r\n          <VictoryLine\r\n            key={key + i}\r\n            name={key}\r\n            data={values}\r\n            style={{ data: { stroke: keysColor[key], strokeWidth: 4 } }}\r\n          />\r\n        )\r\n        // return l\r\n        return onlyStroke ? (\r\n          [\r\n            l,\r\n            <VictoryLine\r\n              key={`${key}-${i}-ghost`}\r\n              name=\"ghost\"\r\n              data={values}\r\n              style={{ data: { stroke: 'black' } }}\r\n            />\r\n          ]\r\n        ): l;\r\n      })}\r\n\r\n    </ChartBase>\r\n  )\r\n}\r\n\r\nexport default memo(Line)\r\n","import { format } from 'd3-format';\r\nimport { range, round } from 'lodash';\r\nimport React, { memo, useCallback, useMemo } from 'react'\r\nimport { VictoryAxis, VictoryBar, VictoryGroup, VictoryLabel, VictoryLine } from 'victory';\r\n\r\nimport ChartBase from './ChartBase';\r\nimport theme from './theme';\r\n\r\nconst formatYmax = ymax => {\r\n  if (ymax < 15) return 16\r\n  return 12000\r\n}\r\n\r\nconst BarAndLine = ({ data, data2, keys, radioToggle, unit2, yMax, barWidth, precision, ...props }) => {\r\n  // const precision = useMemo(() => data[0].values[0].y.toString().split('.')[1] ? 1 : 0 , [data])\r\n  const formatter = useCallback((pre) => pre > 0 ? format(`.${pre}f`) : format(',d'), [])\r\n\r\n  const keysColor = useMemo(() => keys.reduce((kc, k, i) => {\r\n    kc[k] = theme.group.colorScale[i]\r\n    return kc\r\n  }, {}), [keys])\r\n  const roundedYMax = useMemo(() => yMax.map(formatYmax), [yMax])\r\n  const yAxisWidth = useMemo(() => roundedYMax[1].toLocaleString().length, [roundedYMax])\r\n  const tickValues = range(0, 1.125, 0.125)\r\n  const getTickFormat = useCallback(i => (t) => formatter(0)(t * roundedYMax[i]), [formatter, roundedYMax])\r\n  return (\r\n    <ChartBase\r\n      // tooltipLabels={({ datum }) => `${datum.childName}\\n${datum.y}`}\r\n      yMax={yMax[0]}\r\n      padding={{ right: yAxisWidth * 13 }}\r\n      domain={{ y: [0, 1] }}\r\n      tickValues={tickValues}\r\n      tickFormat={getTickFormat(0)}\r\n      {...props}\r\n    >\r\n      <VictoryAxis\r\n        dependentAxis\r\n        tickValues={tickValues}\r\n        label={unit2}\r\n        offsetX={-330}\r\n        style={{\r\n          axis: { stroke: 'none' },\r\n          axisLabel: {\r\n            writingMode: 'vertical-rl',\r\n            textOrientation: 'mixed',\r\n            transform: 'rotate(180deg)',\r\n          }\r\n        }}\r\n        tickFormat={getTickFormat(1)}\r\n        axisLabelComponent={<VictoryLabel dx={34} />}\r\n      />\r\n      <VictoryGroup offset={barWidth}>\r\n        {data.map(({ key, values }, i) => {\r\n          return (\r\n            <VictoryBar\r\n              key={key + i}\r\n              name={key}\r\n              barWidth={barWidth}\r\n              data={values.map(v => ({ ...v, y: v.y / roundedYMax[0] }))}\r\n              style={{ data: { fill: keysColor[key] } }}\r\n              labels={({ datum }) => formatter(1)(datum.y * roundedYMax[0])}\r\n            />\r\n          );\r\n        })}\r\n      </VictoryGroup>\r\n      {data2.map(({ key, values }) => (\r\n        <VictoryLine\r\n          key={key}\r\n          name={key}\r\n          data={values.map(v => ({ ...v, y: v.y / roundedYMax[1] }))}\r\n          style={{ data: { stroke: keysColor[key] } }}\r\n          labels={({ datum }) => formatter(0)(datum.y * roundedYMax[1])}\r\n          labelComponent={<VictoryLabel verticalAnchor=\"start\" dy={6} />}\r\n        />\r\n      ))}\r\n    </ChartBase>\r\n  )\r\n}\r\n\r\nexport default memo(BarAndLine)\r\n","import React, { createElement, memo, useMemo, useState } from 'react'\nimport { AspectRatio, Circle, Flex, HStack, Stack } from '@chakra-ui/layout'\nimport useSWR from 'swr'\nimport { useCheckbox, useCheckboxGroup } from '@chakra-ui/checkbox'\nimport { chunk, groupBy, last, mapValues, maxBy, size, sumBy } from 'lodash'\nimport { useRadio, useRadioGroup } from '@chakra-ui/radio'\n\nimport chartData from '../../data'\nimport Text from '../../components/Text'\nimport Box from '../../components/Box'\nimport Carousel from '../../components/Carousel'\nimport { responsive, colorScale } from '../../components/ThemeProvider/theme'\nimport StackedBar from './StackedBar'\nimport Bar from './Bar'\nimport Line from './Line'\nimport BarAndLine from './BarAndLine'\nimport useResponsive from '../../contexts/mediaQuery/useResponsive'\n\nconst fetcher = (...a) => fetch(...a).then(res => res.text())\n\nconst chartComponents = {\n  stacked: StackedBar,\n  'stacked-percent': StackedBar.Percent,\n  bar: Bar,\n  line: Line,\n  'bar+line': BarAndLine,\n}\n\nconst getXPadding = count => {\n  if (count < 3) return 100\n  if (count < 4) return 60\n  return 40\n}\n\nconst getBarWidth = count => {\n  if (count < 4) return 32\n  if (count < 6) return 25\n  return 15\n}\n\nconst ButtonBase = ({ input, checkbox, color, children }) => (\n  <Box as=\"label\" m=\"0.25em\">\n    <input {...input} />\n    <Box\n      {...checkbox}\n      cursor=\"pointer\"\n      borderColor=\"white\"\n      borderWidth=\"1px\"\n      color={color}\n      borderRadius=\"full\"\n      _checked={{\n        opacity: 1,\n      }}\n      opacity={0.5}\n      px={2}\n      py={0}\n      fontSize=\"0.875em\"\n    >\n      {children}\n    </Box>\n  </Box>\n)\n\nconst ToggleBase = ({ children, categoryPerLine, ...props }) => {\n  const { isMobile } = useResponsive()\n  return (\n    <HStack justifyContent=\"center\" {...props}>\n      <Text fontSize=\"0.875em\" display={responsive('none', 'inline')}>請依類別篩選</Text>\n      <Box>\n        {useMemo(() => chunk(children, categoryPerLine && isMobile ? categoryPerLine : Infinity).map((row, i) => (\n          <Flex flexWrap=\"wrap\" mx=\"-0.25em\" key={i}>\n            {row}\n          </Flex>\n        )), [categoryPerLine, children, isMobile])}\n      </Box>\n    </HStack>\n  )\n}\n\nconst CheckBoxButton = ({ color, ...props }) => {\n  const { getInputProps, getCheckboxProps } = useCheckbox(props)\n\n  const input = getInputProps()\n  const checkbox = getCheckboxProps()\n  return <ButtonBase input={input} checkbox={checkbox} color={color} {...props} />\n}\n\nconst CategoryToggler = ({ options, onChange, categoryPerLine, defaultValue }) => {\n  const { getCheckboxProps } = useCheckboxGroup({\n    name: \"categories\",\n    defaultValue: defaultValue || options,\n    // onChange: v => onChange(v.length ? v : options),\n    onChange,\n  })\n  return (\n    <ToggleBase categoryPerLine={categoryPerLine}>\n      {options.map((d, i) => {\n        const checkbox = getCheckboxProps({ value: d })\n        return <CheckBoxButton key={d} color={colorScale[i]} {...checkbox}>{d}</CheckBoxButton>\n      })}\n    </ToggleBase>\n  )\n}\n\nconst RadioButton = ({ color, ...props }) => {\n  const { getInputProps, getCheckboxProps } = useRadio(props)\n\n  const input = getInputProps()\n  const checkbox = getCheckboxProps()\n  return <ButtonBase input={input} checkbox={checkbox} color={color} {...props} />\n\n}\n\nconst CategoryRadioToggler = ({ options, onChange }) => {\n  const { getRootProps, getRadioProps } = useRadioGroup({\n    name: \"categories\",\n    defaultValue: options[0],\n    onChange: v => onChange([v]),\n    // onChange,\n  })\n  const rootProps = getRootProps()\n  return (\n    <ToggleBase {...rootProps}>\n      {options.map((d) => {\n        const checkbox = getRadioProps({ value: d })\n        return <RadioButton key={d} color={colorScale[2]} {...checkbox}>{d}</RadioButton>\n      })}\n    </ToggleBase>\n  )\n}\n\nconst getYMax = stacked => (d) => {\n  const group = groupBy(d.reduce((all, dd) => [...all, ...dd.values], []), 'x')\n  return Math.max(...Object.values(mapValues(group, g => stacked ? sumBy(g, 'y') : maxBy(g, 'y').y)))\n}\n\nconst Chart = memo(({ togglable, radioToggle, type, file, notes, noXUnit, biaxial, categoryPerLine, legend, precision, defaultFilter }) => {\n  const { data = null } = useSWR(file, fetcher)\n  const formattedData = useMemo(() => {\n    if (!data) return null\n    const rows = data.split(/\\r?\\n/).map(r => r.split(','))\n    const header = rows.shift()\n    const unit = header[0]\n    let unit2\n    const xUnit = last(header) < 13 ? '月' : '年'\n    const grouped = Number.isNaN(rows[0][1] * 1)\n    let total\n    const keys = {}\n    const d = rows.map((v) => {\n      const key = v[0]\n      if (biaxial) {\n        const vv = v.slice(1)\n        if (vv.length && !vv.some(Boolean)) {\n          unit2 = key\n          return null\n        }\n      }\n      const group = grouped ? v[1] : null\n      const index = grouped ? 2 : 1\n      const f = {\n        values: v.slice(index).map((vv, i) => ({ x: header[index + i], y: vv * 1 })),\n        key,\n        group,\n        unit2,\n      }\n      if (!key) return null\n      if (key === '總和') {\n        total = f\n        return null\n      }\n      keys[key] = 1\n      return f\n    }).filter(Boolean)\n    const sidedData = biaxial ? Object.values(groupBy(d, 'unit2')) : d\n\n    return {\n      xUnit,\n      unit,\n      unit2,\n      data: biaxial ? sidedData[0] : d,\n      data2: biaxial && sidedData[1],\n      grouped,\n      total,\n      xPadding: getXPadding(d[0].values.length),\n      barWidth: getBarWidth(d[0].values.length) * (radioToggle ? 0.5 : 1),\n      keys: type !== 'line' && !radioToggle && legend ? legend : Object.keys(keys),\n      yMax: biaxial ? sidedData.map(getYMax(type === 'stacked')): getYMax(type === 'stacked')(d),\n    }\n  }, [data, biaxial, legend, type, radioToggle])\n\n  const [activeCategories, setCategories] = useState(defaultFilter)\n\n  return formattedData && (\n    <>\n      <AspectRatio ratio={400 / 250}>\n        <Box border=\"1px solid white\" p=\"0.5em\">\n          {createElement(chartComponents[type] || 'div', {\n            ...formattedData,\n            animate: togglable,\n            noXUnit,\n            radioToggle,\n            precision,\n            data: formattedData.data.map((d) => {\n              const active = (radioToggle ? !activeCategories && d.key === formattedData.keys[0] : !activeCategories) || activeCategories?.includes(d.key)\n              if (radioToggle && !active) return null\n              return { ...d, values: d.values.map(dd => ({ ...dd, y: active ? dd.y : 0 })) }\n            }).filter(Boolean),\n            filtered: activeCategories && activeCategories.length !== formattedData.keys.length,\n          })}\n        </Box>\n      </AspectRatio>\n      {legend && (\n        <HStack\n          justifyContent=\"center\"\n          spacing={radioToggle ? responsive('0.25em', '0.5em') : '1em'}\n          fontSize={radioToggle ? responsive('0.625em', '0.875em') : responsive('0.875em', '1em')}\n        >\n          {legend.map((label, i) => (\n            <HStack\n              color={type === 'line' ? 'white' : colorScale[i]}\n              spacing={radioToggle ? '0.125em' : '0.375em'}\n            >\n              {type === 'line' ? (\n                <Box\n                  mt=\"0.125em\"\n                  width=\"1.75em\"\n                  height=\"4px\"\n                  rounded=\"1em\"\n                  bg={i ? 'black' : 'white'}\n                  border=\"1px solid\"\n                  borderColor={i ? 'white' : 'black'}\n                />\n              ) : (\n                <Circle mt=\"0.125em\" size=\"0.625em\" bg=\"current\" />\n              )}\n              <Text fontWeight=\"500\">{label}</Text>\n            </HStack>\n          ))}\n        </HStack>\n      )}\n      {togglable && <CategoryToggler defaultValue={defaultFilter} categoryPerLine={categoryPerLine} options={formattedData.keys} onChange={setCategories} />}\n      {radioToggle && <CategoryRadioToggler categoryPerLine={categoryPerLine} options={formattedData.keys} onChange={setCategories} />}\n      {notes && (\n        <Box>\n          {notes.map((n, i) => <Text.Note key={i}>註{i + 1}：{n}</Text.Note>)}\n        </Box>\n      )}\n    </>\n  )\n})\n\nconst ChartLayout = ({ title, ...props }) => {\n  return (\n    <Stack spacing=\"1em\" px=\"0.25em\">\n      <Text.H3 textAlign=\"center\" fontSize={title.length > 20 && responsive('0.875em', '1.375em')}>{title}</Text.H3>\n      <Chart {...props} />\n    </Stack>\n  )\n}\n\nconst Charts = ({ data, ...props }) => {\n  const charts = data.map(k => <ChartLayout key={k} {...chartData[k]} />)\n  if (charts.length === 1) return <Box {...props}>{charts}</Box>\n  return (\n    <Box {...props}>\n      <Carousel\n        width=\"100%\"\n        silderProps={{\n          infinite: false,\n          lazyLoad: true,\n        }}\n        charts\n      >{charts}</Carousel>\n    </Box>\n  )\n}\n\nexport default Charts\n","module.exports={\r\n'10-1': { precision: 1, legend: ['2018', '2019', '2020'], type: 'bar', title: '2018-2020年會員年購票次數', file: require('./10-1＜2018-2020年會員年購票次數＞.csv').default, notes: [\"會員購買同節目名稱之所有購票視為購買1次(1檔節目)、購買2次為2檔節目，依此類推。\",\"百分比數值為該年度會員購票次數1次、2次、3次以上的人數比例，四捨五入取整數呈現。\"], noXUnit: true },\r\n'10-2': { legend: ['<20歲', '20~30歲', '31~40歲', '41~50歲', '51~60歲', '>60歲'], type: 'bar', title: '2018-2020年會員購票次數及年齡分佈', file: require('./10-2＜2018-2020年會員購票次數及年齡分佈＞.csv').default, notes: [\"會員購買同節目名稱之所有購票視為購買1次(1檔節目)、購買2次為2檔節目，依此類推。\",\"百分比數值為該年度會員購票次數1次、2次、3次以上的人數比例，四捨五入取整數呈現。\"], radioToggle: true },\r\n'11': { type: 'stacked-percent', categoryPerLine: 2, title: '2018-2020年會員購票方式', file: require('./11＜2018-2020年會員購票方式＞.csv').default, notes: [\"圖示為2018~2020各年內購票會員，依該年購票張數統計購票方式佔比。\",\"百分比數值為該年會員購票方式之張數佔比，四捨五入取整數呈現。\"], togglable: true },\r\n'3-1': { type: 'stacked', title: '2018-2020年節目票房', file: require('./3-1＜2018-2020年節目票房＞.csv').default, notes: [\"其他節目類別為非戲劇、音樂、舞蹈或親子節目，包含講座、工作坊等活動。\"], togglable: true },\r\n'3-2': { type: 'stacked', title: '2018-2020年節目檔數', file: require('./3-2＜2018-2020年節目檔數＞.csv').default, notes: [\"同檔節目多場次巡演，皆計為一檔。\",\"其他節目類別為非戲劇、音樂、舞蹈或親子節目，包含講座、工作坊等活動。\"], togglable: true },\r\n'3-3': { type: 'stacked', title: '2018-2020年演出場次', file: require('./3-3＜2018-2020年演出場次＞.csv').default, notes: [\"同檔節目多場次巡演，皆計為一檔。\",\"其他節目類別為非戲劇、音樂、舞蹈或親子節目，包含講座、工作坊等活動。\"], togglable: true },\r\n'3-4': { type: 'stacked', title: '2018-2020年售出票數', file: require('./3-4＜2018-2020年售出票數＞.csv').default, notes: [\"其他節目類別為非戲劇、音樂、舞蹈或親子節目，包含講座、工作坊等活動。\"], togglable: true },\r\n'5-1': { legend: ['2018', '2019', '2018與2019平均', '2020'], type: 'bar', title: '2018-2020上下半年節目票房', file: require('./5-1＜2018-2020上下半年節目票房＞.csv').default, noXUnit: true },\r\n'5-2': { legend: ['2018', '2019', '2018與2019平均', '2020'], type: 'bar', title: '2018-2020上下半年節目檔數', file: require('./5-2＜2018-2020上下半年節目檔數＞.csv').default, noXUnit: true },\r\n'5-3': { legend: ['2018', '2019', '2018與2019平均', '2020'], type: 'bar', title: '2018-2020上下半年演出場次', file: require('./5-3＜2018-2020上下半年演出場次＞.csv').default, noXUnit: true },\r\n'5-4': { legend: ['2018', '2019', '2018與2019平均', '2020'], type: 'bar', title: '2018-2020上下半年售出票數', file: require('./5-4＜2018-2020上下半年售出票數＞.csv').default, noXUnit: true },\r\n'6-1': { legend : ['2020', '2018與2019平均'], type: 'line', defaultFilter: ['戲劇'], title: '2020每月節目票房', file: require('./6-1＜2020每月節目票房＞.csv').default, notes: [\"各類別節目產值比較以四大類節目為主，其他類節目(非戲劇、音樂、舞蹈或親子)在此未呈現。\"], togglable: true },\r\n'6-2': { legend : ['2020', '2018與2019平均'], type: 'line', defaultFilter: ['音樂'], title: '2020每月節目檔數', file: require('./6-2＜2020每月節目檔數＞.csv').default, notes: [\"同檔節目多場次巡演，皆計為一檔。\",\"各類別節目產值比較以四大類節目為主，其他類節目(非戲劇、音樂、舞蹈或親子)在此未呈現。\"], togglable: true },\r\n'6-3': { legend : ['2020', '2018與2019平均'], type: 'line', defaultFilter: ['戲劇'], title: '2020每月演出場次', file: require('./6-3＜2020每月演出場次＞.csv').default, notes: [\"各類別節目產值比較以四大類節目為主，其他類節目(非戲劇、音樂、舞蹈或親子)在此未呈現。\"], togglable: true },\r\n'6-4': { legend : ['2020', '2018與2019平均'], type: 'line', defaultFilter: ['戲劇'], title: '2020每月售票張數', file: require('./6-4＜2020每月售票張數＞.csv').default, notes: [\"各類別節目產值比較以四大類節目為主，其他類節目(非戲劇、音樂、舞蹈或親子)在此未呈現。\"], togglable: true },\r\n'8': { legend: ['新註冊會員', '既有（舊）會員'], type: 'stacked', title: '2018-2020年會員購票人數', file: require('./8＜2018-2020年會員購票人數＞.csv').default, notes: [\"會員在該年曾購票1張以上，即視為在該年購票會員。\",\"百分比數值為該年度新註冊、既有(舊)會員佔比，四捨五入取整數呈現。\"] },\r\n'9': { legend: ['新註冊會員', '既有（舊）會員', '每人均購票金額'], type: 'bar+line', title: '2018-2020年會員購票金額', file: require('./9＜2018-2020年會員購票金額＞.csv').default, notes: [\"會員在該年曾購票1張以上，即視為在該年購票會員。\",\"百分比數值為該年度新註冊、既有(舊)會員佔比，四捨五入取整數呈現。\"], biaxial: true },\r\n}\r\n","export default __webpack_public_path__ + \"static/media/10-1＜2018-2020年會員年購票次數＞.2885f363.csv\";","export default __webpack_public_path__ + \"static/media/10-2＜2018-2020年會員購票次數及年齡分佈＞.544764f3.csv\";","export default __webpack_public_path__ + \"static/media/11＜2018-2020年會員購票方式＞.fa09d026.csv\";","export default __webpack_public_path__ + \"static/media/3-1＜2018-2020年節目票房＞.d00d56d9.csv\";","export default __webpack_public_path__ + \"static/media/3-2＜2018-2020年節目檔數＞.8481c394.csv\";","export default __webpack_public_path__ + \"static/media/3-3＜2018-2020年演出場次＞.de6be623.csv\";","export default __webpack_public_path__ + \"static/media/3-4＜2018-2020年售出票數＞.717c2ade.csv\";","export default __webpack_public_path__ + \"static/media/5-1＜2018-2020上下半年節目票房＞.622ad329.csv\";","export default __webpack_public_path__ + \"static/media/5-2＜2018-2020上下半年節目檔數＞.3773d76e.csv\";","export default __webpack_public_path__ + \"static/media/5-3＜2018-2020上下半年演出場次＞.899bb5ab.csv\";","export default __webpack_public_path__ + \"static/media/5-4＜2018-2020上下半年售出票數＞.bc66b3e3.csv\";","export default __webpack_public_path__ + \"static/media/6-1＜2020每月節目票房＞.f3dbc304.csv\";","export default __webpack_public_path__ + \"static/media/6-2＜2020每月節目檔數＞.35d071c5.csv\";","export default __webpack_public_path__ + \"static/media/6-3＜2020每月演出場次＞.1c686c18.csv\";","export default __webpack_public_path__ + \"static/media/6-4＜2020每月售票張數＞.475d0033.csv\";","export default __webpack_public_path__ + \"static/media/8＜2018-2020年會員購票人數＞.8625cffe.csv\";","export default __webpack_public_path__ + \"static/media/9＜2018-2020年會員購票金額＞.a7acd3b1.csv\";"],"sourceRoot":""}